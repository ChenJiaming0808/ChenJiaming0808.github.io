# 1.数据库的三级模式概念与定义：
## 1.1 外模式
外模式又称子模式或用户模式，对应于用户级。它是某个或某几个用户所看到的数据库的数据视图，是与某一应用有关的数据的逻辑表示。外模式是从模式导出的一个子集，包含模式中允许特定用户使用的那部分数据。用户可以通过外模式描述语言来描述、定义对应于用户的数据记录(外模式)，也可以利用数据操纵语言(Data Manipulation Language，DML)对这些数据记录进行操作。外模式反映了数据库系统的用户观。
## 1.2 概念模式（模式、逻辑模式）
概念模式又称模式或逻辑模式，对应于概念级。它是由数据库设计者综合所有用户的数据，按照统一的观点构造的全局逻辑结构，是对数据库中全部数据的逻辑结构和特征的总体描述，是所有用户的公共数据视图(全局视图)。它是由数据库管理系统提供的数据模式描述语言(Data Description Language，DDL)来描述、定义的。概念模式反映了数据库系统的整体观。
## 1.3 内模式
内模式又称存储模式，对应于物理级。它是数据库中全体数据的内部表示或底层描述，是数据库最低一级的逻辑描述，它描述了数据在存储介质上的存储方式和物理结构，对应着实际存储在外存储介质上的数据库。内模式由内模式描述语言来描述、定义的。内模式反映了数据库系统的存储观。
在一个数据库系统中，只有唯一的数据库， 因而作为定义 、描述数据库存储结构的内模式和定义、描述数据库逻辑结构的模式，也是唯一的，但建立在数据库系统之上的应用则是非常广泛、多样的，所以对应的外模式不是唯一的，也不可能是唯一的。


# 2.数据库、数据库系统、数据库管理系统的概念与关系
数据库是长期存储在计算机内有组织、可共享的数据集合，数据库中的数据按一定的数据模型组织、描述、存储，冗余度小，具有较高的数据独立性、共享性和易扩展性。
数据库管理系统是数据库系统的核心组成部分，它是介于用户与操作系统之间的一层数据管理软件，是用户和数据库的接口。
数据库系统是带有数据库的计算机系统，一般由数据库、数据库管理系统(及其开发工具)
三者之间的关系是：数据库系统包含数据库和数据库管理系统。


# 3.完整性约束包括哪几类，以及基本概念：实体、参照、用户自定义
## 3.1 实体完整性
规定表的每一行在表中是惟一的实体。
## 3.2 参照完整性
指两个表的主关键字和外关键字的数据应一致，保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。
## 3.3 用户定义的完整性
不同的关系数据库系统根据其应用环境的不同，往往还需要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件，它反映某一具体应用必须满足的语义要求。


# 4.SQL语言分成哪四大类：每个类别包括哪些语句（DQL、DML、DDL、DCL的概念与区别）
SQL语言共分为四大类：数据查询语言DQL，数据操纵语言DML，数据定义语言DDL，数据控制语言DCL。
## 4.1 数据查询语言DQL
数据查询语言DQL基本结构是由SELECT子句，FROM子句，WHERE
子句组成的查询块：
SELECT <字段名表> FROM <表或视图名> WHERE <查询条件>

## 4.2 数据操纵语言DML
数据操纵语言DML主要有三种形式：
1) 插入：INSERT
2) 更新：UPDATE
3) 删除：DELETE

## 4.3 数据定义语言DDL
数据定义语言DDL用来创建数据库中的各种对象-----表、视图、
索引、同义词、聚簇等如：
CREATE TABLE/VIEW/INDEX/SYN/CLUSTER
| | | | |
表 视图 索引 同义词 簇
 
DDL操作是隐性提交的！不能rollback 

## 4.4 数据控制语言DCL
数据控制语言DCL用来授予或回收访问数据库的某种特权，并控制数据库操纵事务发生的时间及效果，对数据库实行监视等。如：
1) GRANT：授权。
2) ROLLBACK [WORK] TO [SAVEPOINT]：回退到某一点。
回滚---ROLLBACK
回滚命令使数据库状态回到上次最后提交的状态。其格式为：
SQL>ROLLBACK;
3) COMMIT [WORK]：提交。
在数据库的插入、删除和修改操作时，只有当事务在提交到数据库时才算完成。在事务提交前，只有操作数据库的这个人才能有权看到所做的事情，别人只有在最后提交完成后才可以看到。
提交数据有三种类型：显式提交、隐式提交及自动提交。下面分别说明这三种类型。
    (1) 显式提交
    用COMMIT命令直接完成的提交为显式提交。其格式为：
    SQL>COMMIT；
    (2) 隐式提交
    用SQL命令间接完成的提交为隐式提交。这些命令是：
    ALTER，AUDIT，COMMENT，CONNECT，CREATE，DISCONNECT，DROP，
    EXIT，GRANT，NOAUDIT，QUIT，REVOKE，RENAME。
    (3) 自动提交
    若把AUTOCOMMIT设置为ON，则在插入、修改、删除语句执行后，系统将自动进行提交，这就是自动提交。
    其格式为：
    SQL>SET AUTOCOMMIT ON；


# 5.事务
## 5.1 基本概念
事务是应用程序中一系列严密的操作，所有操作必须成功完成，否则在每个操作中所作的所有更改都会被撤消。
## 5.2 四个基本特征
### 5.2.1 原子性（Atomicity）
原子性是指事务包含的所有操作要么全部成功，要么全部失败回滚。失败回滚的操作事务，将不能对事物有任何影响。
### 5.2.2 一致性（Consistency）
一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须处于一致性状态。
数据库状态如何变化？每一次数据变更就会导致数据库的状态迁移。如果数据库的初始状态是C0，第一次事务T1的提交就会导致系统生成一个SYSTEM CHANGE NUMBER（SCN），这是数据库状态从C0转变成C1。执行第二个事务T2的时候数据库状态从T1变成T2，以此类推，执行第Tn次事务的时候数据库状态由C(n-1)变成Cn。
一致性可以从一致读和一致写两个方面来理解。
一致读 事务读取数据只能从一个状态中读取，不能从2个或者2个以上状态读取。也就是T(n)只能从C(n-1），C(n-2)... C(1)中的一个状态读取数据，不能一部分数据读取自C(n-1)，而另一部分数据读取自C(n-2)。
一致写 事务执行的数据变更只能基于上一个一致的状态，且只能体现在一个状态中。T(n)的变更结果只能基于C(n-1)，C(n-2), ...C(1)状态，且只能体现在C(n)状态中。也就是说，一个状态只能有一个事务变更数据，不允许有2个或者2个以上事务在一个状态中变更数据。至于具体一致写基于哪个状态，需要判断T(n)事务是否和T(n-1)，T(n-2),...T(1)有依赖关系。
### 5.2.3 隔离性（Isolation）
隔离状态执行事务，使它们好像是系统在给定时间内执行的唯一操作。如果有两个事务，运行在相同的时间内，执行 相同的功能，事务的隔离性将确保每一事务在系统中认为只有该事务在使用系统。这种属性有时称为串行化，为了防止事务操作间的混淆，必须串行化或序列化请求，使得在同一时间仅有一个请求用于同一数据。
### 5.2.4 持久性（Durability）
在事务完成以后，该事务所对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。


# 6.E-R图的基本概念
ER图分为实体、属性、关系三个核心部分。实体是长方形，而属性则是椭圆形，关系为菱形。
ER图的实体（entity）即数据模型中的数据对象，例如人、学生、音乐都可以作为一个数据对象，用长方体来表示，每个实体都有自己的实体成员（entity member）或者说实体对象（entity instance）。
ER图的属性（attribute）即数据对象所具有的属性，例如学生具有姓名、学号、年级等属性，用椭圆形表示，属性分为唯一属性（ unique attribute）和非唯一属性，唯一属性指的是唯一可用来标识该实体实例或者成员的属性，用下划线表示，一般来讲实体都至少有一个唯一属性。
ER图的关系（relationship）用来表现数据对象与数据对象之间的联系，关系用菱形来表示。
ER图中关联关系有三种：
1对1（1:1） ：1对1关系是指对于实体集A与实体集B，A中的每一个实体至多与B中一个实体有关系；反之，在实体集B中的每个实体至多与实体集A中一个实体有关系。
1对多（1:N） ：1对多关系是指实体集A与实体集B中至少有N(N>0)个实体有关系；并且实体集B中每一个实体至多与实体集A中一个实体有关系。
多对多（M:N） ：多对多关系是指实体集A中的每一个实体与实体集B中至少有M(M>0)个实体有关系，并且实体集B中的每一个实体与实体集A中的至少N（N>0）个实体有关系。


# 7.存储过程的概念及其定义语句
## 7.1 概念
存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL 语句集，它存储在数据库中，一次编译后永久有效，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象。在数据量特别庞大的情况下利用存储过程能达到倍速的效率提升。
## 7.2.1 创建无参数的存储过程
```
create procedure procedure_name
as
begin
select * from table_name
end
go
```
## 7.2.2 创建带参数的存储过程
```
create procedure procedure_name
@sname nvarchar(50)
as
begin
select * from table_name where sname = @sname
end
go
```


# 8.视图的概念及其定义语句
## 8.1 概念
视图是指计算机数据库中的视图，是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。
## 8.2 创建视图
```
create view view_name
as
select * from table_name
go
```
## 8.3 使用视图（和表一样）
```
select * from view_name
```


# 9.数据库范式概念及规范化（如何从1NF到2NF到3NF）
## 9.1 概念
为了建立冗余较小、结构合理的数据库，设计数据库时必须遵循一定的规则。在关系型数据库中这种规则就称为范式。范式是符合某一种设计要求的总结。要想设计一个结构合理的关系型数据库，必须满足一定的范式。
## 9.2 规范化
### 9.2.1 第一范式
数据库表中的所有字段值都是不可分解的原子值。
### 9.2.1 第二范式
数据库表中的每一列都和主键相关。
### 9.2.1 第三范式
确保数据表中的每一列数据都和主键直接相关，而不能间接相关。


# 10.常用SQL语句：
## 10.1分组统计类语句：
```
select ... from ... group by...
```
## 10.2条件查询语句：
```
select ... from ... where ...
```
## 10.3记录的增删改
### 10.3.1 增
```
insert into table_name [columns] values (...)
```
### 10.3.2 删
```
delete from table_name [...]
```
### 10.3.3 改
```
update table_name set key_column=value [where ...]
```